--
-- (c) Copyright 2005-2011 JAXIO - Generated by Celerio, a Jaxio tool. http://www.jaxio.com
--
DROP ALL objects;

CREATE TABLE hibernate_sequences (
	sequence_name VARCHAR(255)
	,sequence_next_hi_value INTEGER(10)
);

CREATE TABLE role (
	id BIGINT(19) not null
	,role_name VARCHAR(255)
	,version INTEGER(10)
);
CREATE UNIQUE INDEX IF NOT EXISTS PRIMARY
	ON role (id);
ALTER TABLE role ALTER COLUMN id IDENTITY;

CREATE TABLE user (
	id BIGINT(19) not null
	,password VARCHAR(255)
	,user_name VARCHAR(255)
	,version INTEGER(10)
);
CREATE UNIQUE INDEX IF NOT EXISTS PRIMARY
	ON user (id);
ALTER TABLE user ALTER COLUMN id IDENTITY;

CREATE TABLE user_roles (
	user BIGINT(19) not null
	,roles BIGINT(19) not null
);
CREATE UNIQUE INDEX IF NOT EXISTS PRIMARY
	ON user_roles (user,roles);
CREATE INDEX IF NOT EXISTS FK73429949FB22B98E
	ON user_roles (user);
CREATE INDEX IF NOT EXISTS FK73429949164F12B
	ON user_roles (roles);
CREATE PRIMARY KEY 
	ON user_roles (roles,user);


ALTER TABLE user_roles 
	ADD CONSTRAINT FK73429949FB22B98E
		FOREIGN KEY (user)
			REFERENCES user (id);
ALTER TABLE user_roles 
	ADD CONSTRAINT FK73429949164F12B
		FOREIGN KEY (roles)
			REFERENCES role (id);
